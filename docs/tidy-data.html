<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Tidy Data | A Minimal Introduction to Reproducible Research</title>
  <meta name="description" content="This is a minimal introduction to reproducible research, including data management and handling data in R, compiled for the Biological Sciences BSc(Honours) class at the University of Cape Town." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Tidy Data | A Minimal Introduction to Reproducible Research" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a minimal introduction to reproducible research, including data management and handling data in R, compiled for the Biological Sciences BSc(Honours) class at the University of Cape Town." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Tidy Data | A Minimal Introduction to Reproducible Research" />
  
  <meta name="twitter:description" content="This is a minimal introduction to reproducible research, including data management and handling data in R, compiled for the Biological Sciences BSc(Honours) class at the University of Cape Town." />
  

<meta name="author" content="Jasper Slingsby" />


<meta name="date" content="2024-02-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data.html"/>
<link rel="next" href="further.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Minimal Data Management</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#general"><i class="fa fa-check"></i><b>1.1</b> General</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#lecturesdiscussionstutorials"><i class="fa fa-check"></i><b>1.2</b> Lectures/Discussions/Tutorials</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#deliverables"><i class="fa fa-check"></i><b>1.3</b> Deliverables (Due Thursday the 22nd February)</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#setup"><i class="fa fa-check"></i><b>1.4</b> Software installation and setup (Due Monday 12th Feb)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reproducibility.html"><a href="reproducibility.html"><i class="fa fa-check"></i><b>2</b> Reproducible research</a>
<ul>
<li class="chapter" data-level="2.1" data-path="reproducibility.html"><a href="reproducibility.html#the-reproducibility-crisis"><i class="fa fa-check"></i><b>2.1</b> The Reproducibility Crisis</a></li>
<li class="chapter" data-level="2.2" data-path="reproducibility.html"><a href="reproducibility.html#replication-and-the-reproducibility-spectrum"><i class="fa fa-check"></i><b>2.2</b> Replication and the Reproducibility Spectrum</a></li>
<li class="chapter" data-level="2.3" data-path="reproducibility.html"><a href="reproducibility.html#reproducible-scientific-workflows"><i class="fa fa-check"></i><b>2.3</b> Reproducible Scientific Workflows</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="reproducibility.html"><a href="reproducibility.html#file-and-folder-management"><i class="fa fa-check"></i><b>2.3.1</b> File and folder management</a></li>
<li class="chapter" data-level="2.3.2" data-path="reproducibility.html"><a href="reproducibility.html#coding-and-code-management"><i class="fa fa-check"></i><b>2.3.2</b> Coding and code management</a></li>
<li class="chapter" data-level="2.3.3" data-path="reproducibility.html"><a href="reproducibility.html#computing-environment-and-software"><i class="fa fa-check"></i><b>2.3.3</b> Computing environment and software</a></li>
<li class="chapter" data-level="2.3.4" data-path="reproducibility.html"><a href="reproducibility.html#sharing-of-the-data-code-publication-etc"><i class="fa fa-check"></i><b>2.3.4</b> Sharing of the data, code, publication etc</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="reproducibility.html"><a href="reproducibility.html#why-work-reproducibly"><i class="fa fa-check"></i><b>2.4</b> Why work reproducibly?</a></li>
<li class="chapter" data-level="2.5" data-path="reproducibility.html"><a href="reproducibility.html#barriers-to-working-reproducibly"><i class="fa fa-check"></i><b>2.5</b> Barriers to working reproducibly</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data Management</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#why-do-you-need-to-manage-your-data"><i class="fa fa-check"></i><b>3.1</b> Why do you need to manage your data?</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#the-data-life-cycle"><i class="fa fa-check"></i><b>3.2</b> The Data Life Cycle</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#plan"><i class="fa fa-check"></i><b>3.2.1</b> Plan</a></li>
<li class="chapter" data-level="3.2.2" data-path="data.html"><a href="data.html#collect-and-assure"><i class="fa fa-check"></i><b>3.2.2</b> Collect and Assure</a></li>
<li class="chapter" data-level="3.2.3" data-path="data.html"><a href="data.html#describe"><i class="fa fa-check"></i><b>3.2.3</b> Describe</a></li>
<li class="chapter" data-level="3.2.4" data-path="data.html"><a href="data.html#preserve"><i class="fa fa-check"></i><b>3.2.4</b> Preserve</a></li>
<li class="chapter" data-level="3.2.5" data-path="data.html"><a href="data.html#discover"><i class="fa fa-check"></i><b>3.2.5</b> Discover</a></li>
<li class="chapter" data-level="3.2.6" data-path="data.html"><a href="data.html#integrate"><i class="fa fa-check"></i><b>3.2.6</b> Integrate</a></li>
<li class="chapter" data-level="3.2.7" data-path="data.html"><a href="data.html#analyze"><i class="fa fa-check"></i><b>3.2.7</b> Analyze</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#other-considerations"><i class="fa fa-check"></i><b>3.3</b> Other considerations…</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>4</b> Tidy Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tidy-data.html"><a href="tidy-data.html#data-entry"><i class="fa fa-check"></i><b>4.1</b> Data entry</a></li>
<li class="chapter" data-level="4.2" data-path="tidy-data.html"><a href="tidy-data.html#reproducibility---start-as-you-mean-to-finish"><i class="fa fa-check"></i><b>4.2</b> Reproducibility - start as you mean to finish</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="tidy-data.html"><a href="tidy-data.html#creating-a-git-repository-or-repo-for-short"><i class="fa fa-check"></i><b>4.2.1</b> Creating a Git repository (or repo for short)</a></li>
<li class="chapter" data-level="4.2.2" data-path="tidy-data.html"><a href="tidy-data.html#cloning-your-repo-to-your-local-machine"><i class="fa fa-check"></i><b>4.2.2</b> Cloning your repo to your local machine</a></li>
<li class="chapter" data-level="4.2.3" data-path="tidy-data.html"><a href="tidy-data.html#keeping-your-online-git-repository-in-sync"><i class="fa fa-check"></i><b>4.2.3</b> Keeping your online Git repository in sync</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="tidy-data.html"><a href="tidy-data.html#tidy-data-and-data-wrangling"><i class="fa fa-check"></i><b>4.3</b> Tidy data and data wrangling</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="tidy-data.html"><a href="tidy-data.html#the-dataset"><i class="fa fa-check"></i><b>4.3.1</b> The dataset</a></li>
<li class="chapter" data-level="4.3.2" data-path="tidy-data.html"><a href="tidy-data.html#motivation"><i class="fa fa-check"></i><b>4.3.2</b> The motivation…</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="tidy-data.html"><a href="tidy-data.html#reading-in-data"><i class="fa fa-check"></i><b>4.4</b> Reading in data</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="tidy-data.html"><a href="tidy-data.html#read-google-sheets-with-googlesheets4"><i class="fa fa-check"></i><b>4.4.1</b> Read Google Sheets with <em>googlesheets4</em></a></li>
<li class="chapter" data-level="4.4.2" data-path="tidy-data.html"><a href="tidy-data.html#downloading-google-sheets-with-r"><i class="fa fa-check"></i><b>4.4.2</b> Downloading Google Sheets with R</a></li>
<li class="chapter" data-level="4.4.3" data-path="tidy-data.html"><a href="tidy-data.html#read-microsoft-excel-files-with-readxl"><i class="fa fa-check"></i><b>4.4.3</b> Read Microsoft Excel files with <em>readxl</em></a></li>
<li class="chapter" data-level="4.4.4" data-path="tidy-data.html"><a href="tidy-data.html#reading-text-files-with-readr"><i class="fa fa-check"></i><b>4.4.4</b> Reading text files with <em>readr</em></a></li>
<li class="chapter" data-level="4.4.5" data-path="tidy-data.html"><a href="tidy-data.html#writing-out-files"><i class="fa fa-check"></i><b>4.4.5</b> Writing out files!</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="tidy-data.html"><a href="tidy-data.html#a-quick-aside-on-data-types"><i class="fa fa-check"></i><b>4.5</b> A quick aside on data types</a></li>
<li class="chapter" data-level="4.6" data-path="tidy-data.html"><a href="tidy-data.html#learning-to-speak-tidyverse"><i class="fa fa-check"></i><b>4.6</b> Learning to speak <em>Tidyverse</em></a></li>
<li class="chapter" data-level="4.7" data-path="tidy-data.html"><a href="tidy-data.html#getting-things-tidy"><i class="fa fa-check"></i><b>4.7</b> Getting things <em>Tidy</em></a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="tidy-data.html"><a href="tidy-data.html#pivot_longer"><i class="fa fa-check"></i><b>4.7.1</b> <code>pivot_longer</code></a></li>
<li class="chapter" data-level="4.7.2" data-path="tidy-data.html"><a href="tidy-data.html#pivot_wider"><i class="fa fa-check"></i><b>4.7.2</b> <code>pivot_wider</code></a></li>
<li class="chapter" data-level="4.7.3" data-path="tidy-data.html"><a href="tidy-data.html#unite-and-separate"><i class="fa fa-check"></i><b>4.7.3</b> <code>unite</code> and <code>separate</code></a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="tidy-data.html"><a href="tidy-data.html#getting-out-of-the-tidyverse"><i class="fa fa-check"></i><b>4.8</b> Getting out of the <em>tidyverse</em></a></li>
<li class="chapter" data-level="4.9" data-path="tidy-data.html"><a href="tidy-data.html#joining-dataframes"><i class="fa fa-check"></i><b>4.9</b> Joining dataframes</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="further.html"><a href="further.html"><i class="fa fa-check"></i><b>5</b> Further Reading</a>
<ul>
<li class="chapter" data-level="5.1" data-path="further.html"><a href="further.html#libraryosfr-for-interacting-with-the-open-science-framework-osf-from-r"><i class="fa fa-check"></i><b>5.1</b> library(osfr) for interacting with the Open Science Framework (OSF) from R</a></li>
<li class="chapter" data-level="5.2" data-path="further.html"><a href="further.html#lisa-debruine-and-dale-barr-2021-data-skills-for-reproducible-research"><i class="fa fa-check"></i><b>5.2</b> Lisa DeBruine and Dale Barr (2021) “Data Skills for Reproducible Research”</a></li>
<li class="chapter" data-level="5.3" data-path="further.html"><a href="further.html#reproducibility-trial-246-biologists-get-different-results-from-same-data-sets"><i class="fa fa-check"></i><b>5.3</b> Reproducibility trial: 246 biologists get different results from same data sets</a></li>
<li class="chapter" data-level="5.4" data-path="further.html"><a href="further.html#conference-talk-on-building-reproducible-and-replicable-projects"><i class="fa fa-check"></i><b>5.4</b> Conference Talk on Building Reproducible and Replicable Projects</a></li>
<li class="chapter" data-level="5.5" data-path="further.html"><a href="further.html#british-ecological-society-2014-a-guide-to-data-management-in-ecology-and-evolution"><i class="fa fa-check"></i><b>5.5</b> British Ecological Society (2014) “A Guide to Data Management in Ecology and Evolution”</a></li>
<li class="chapter" data-level="5.6" data-path="further.html"><a href="further.html#the-british-ecological-society-2017-a-guide-to-reproducible-code-in-ecology-and-evolution"><i class="fa fa-check"></i><b>5.6</b> The British Ecological Society (2017) “A Guide to Reproducible Code in Ecology and Evolution”</a></li>
<li class="chapter" data-level="5.7" data-path="further.html"><a href="further.html#six-factors-affecting-reproducibility-in-life-science-research-and-how-to-handle-them"><i class="fa fa-check"></i><b>5.7</b> Six factors affecting reproducibility in life science research and how to handle them</a></li>
<li class="chapter" data-level="5.8" data-path="further.html"><a href="further.html#braga-et-al.-2023-not-just-for-programmers-how-github-can-accelerate-collaborative-and-reproducible-research-in-ecology-and-evolution.-methods-in-ecology-and-evolution"><i class="fa fa-check"></i><b>5.8</b> Braga et al. (2023) “Not just for programmers: How GitHub can accelerate collaborative and reproducible research in ecology and evolution. Methods in Ecology and Evolution”</a></li>
<li class="chapter" data-level="5.9" data-path="further.html"><a href="further.html#grames-e.m.-and-elphick-c.s.-2020.-use-of-study-design-principles-would-increase-the-reproducibility-of-reviews-in-conservation-biology.-biological-conservation"><i class="fa fa-check"></i><b>5.9</b> Grames, E.M. and Elphick, C.S., 2020. Use of study design principles would increase the reproducibility of reviews in conservation biology. Biological Conservation</a></li>
<li class="chapter" data-level="5.10" data-path="further.html"><a href="further.html#kellie-d.-and-westgate-m.-2023-improving-code-reproducibility-small-steps-with-big-impacts-research-communities-by-springer-nature."><i class="fa fa-check"></i><b>5.10</b> Kellie, D. and Westgate, M. (2023) Improving code reproducibility: Small steps with big impacts, Research Communities by Springer Nature.</a></li>
<li class="chapter" data-level="5.11" data-path="further.html"><a href="further.html#powers-et-al.-2019-open-science-reproducibility-and-transparency-in-ecology"><i class="fa fa-check"></i><b>5.11</b> Powers <em>et al.</em> (2019) “Open science, reproducibility and transparency in ecology”</a></li>
<li class="chapter" data-level="5.12" data-path="further.html"><a href="further.html#zuduo-zheng-2021-reasons-challenges-and-some-tools-for-doing-reproducible-transportation-research"><i class="fa fa-check"></i><b>5.12</b> Zuduo Zheng (2021) “Reasons, challenges, and some tools for doing reproducible transportation research”</a></li>
<li class="chapter" data-level="5.13" data-path="further.html"><a href="further.html#ted-talk-about-reproducibility-crisis"><i class="fa fa-check"></i><b>5.13</b> TED Talk about Reproducibility Crisis</a></li>
<li class="chapter" data-level="5.14" data-path="further.html"><a href="further.html#s.-m.-powers-and-s.-e.-hampton.-2019.-open-science-reproducibility-and-transparency-in-ecology.-ecological-applications-291e01822.-10.1002eap.1822"><i class="fa fa-check"></i><b>5.14</b> S. M. Powers, and S. E. Hampton. 2019. Open science, reproducibility, and transparency in ecology. Ecological Applications 29(1):e01822. 10.1002/eap.1822</a></li>
<li class="chapter" data-level="5.15" data-path="further.html"><a href="further.html#ellison-2010-repeatability-and-transparency-in-ecological-research"><i class="fa fa-check"></i><b>5.15</b> Ellison (2010) “Repeatability and transparency in Ecological research”</a></li>
<li class="chapter" data-level="5.16" data-path="further.html"><a href="further.html#meng-x.-2020.-reproducibility-replicability-and-reliability"><i class="fa fa-check"></i><b>5.16</b> Meng, X. 2020. Reproducibility, Replicability and Reliability</a></li>
<li class="chapter" data-level="5.17" data-path="further.html"><a href="further.html#white-et-al.-2015-reproducible-research-in-the-study-of-biological-coloration"><i class="fa fa-check"></i><b>5.17</b> White et al. (2015) “Reproducible research in the study of biological coloration”</a></li>
<li class="chapter" data-level="5.18" data-path="further.html"><a href="further.html#voelkl-et-al.-2020-reproducibility-of-animal-research-in-light-of-biological-variation"><i class="fa fa-check"></i><b>5.18</b> Voelkl et al. (2020) Reproducibility of animal research in light of biological variation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Minimal Introduction to Reproducible Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidy-data" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Tidy Data<a href="tidy-data.html#tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This section is aimed at helping you develop a relatively simple reproducible workflow for your project (i.e. Deliverable 2 described in section <a href="index.html#deliverables">1.3</a><span class="math inline">\(^*\)</span>) and providing a demonstration of some of the <em>Tidyverse</em> tools for wrangling and tidying your data.</p>
<p><span class="math inline">\(^*\)</span>But note that the content of the previous 2 sections are important for the deliverable too.</p>
<p><br></p>
<p>Ultimately, tidying your data is the first step in your data analysis and communication workflow.</p>
<div class="float">
<img src="img/tidy_workflow.png" alt="The core components of most data analysis workflows (Wickham et al. 2019)." />
<div class="figcaption"><em>The core components of most data analysis workflows <span class="citation">(<a href="#ref-Wickham2019">Wickham et al. 2019</a>)</span>.</em></div>
</div>
<p><br></p>
<p>But first you need to get your data into a digital format…</p>
<p><br></p>
<div id="data-entry" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Data entry<a href="tidy-data.html#data-entry" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>NOTE: This section may not be relevant to the module deliverable, because you should have an example dataset that’s already in digital format, but it will be useful if/when you collect new data of your own.</p>
</blockquote>
<p>Before we start, I should highlight that one very good way of reducing errors in data entry and improving quality assurance and quality control (QA/QC) is to make use of various forms of <strong>data validation</strong> like <strong>drop down lists</strong> and <strong>conditional formatting</strong>. These can be used to limit data types (i.e. avoids you entering text into a numeric column or vice versa), or limiting the range of values entered (e.g. 0 to 100 for percentages), or just highlighting values that are possible, but rare, and should be double-checked, like 100m tall trees. Unit errors are incredibly common in ecological data entry, especially for things like plant height where you may be measuring 20cm tall grasses and 20m tall trees!!! Drop down lists really come into their own when you’re working with lots of different Latin species names etc. Typos, spelling errors and synonyms can take weeks of work to fix! Restricting the names to a drop-down list from a known published taxonomic resource really makes a huge difference!</p>
<p><a href="https://docs.google.com/spreadsheets/d/1U9yNaJFyd6kb5vlKzHhcgM6sLEzw_xVtQxewpH7k0Ho/edit?usp=sharing">Here’s an example</a> from a vegetation survey practical I ran as part of the BIO3018F Ecology and Evolution 3rd-year field course. If you go to the <code>Sites</code> sheet, you’ll see that the first two columns <code>Site</code> and <code>Point</code> are drop-down lists that reference the <code>RangeLimits</code> spreadsheet, to make entry easy and to prevent spelling mistakes etc. You’ll also notice that the different columns have specified ranges, and that a number outside the range is entered (e.g. anything &gt;100 for <code>PercentBareSoil</code>) then the cell is highlighted with a warning. You can see the data validation rules by selecting a cell in the column of interest and clicking <code>Data &gt; Data validation</code></p>
<p>It’s often easy to forget to collect some measurements etc when in the field, like site-level information. Sometimes what I do to prevent this is set up the next data entry sheet (trait data in this case), to require that you fill in the site name from a drop-down list that is populated in the site data sheet. This limits the names you can use to only those that have site data, and serves as a reminder should you have forgotten. Check out the <code>SitePoint</code> column in the <code>Traits</code> sheet.</p>
<p>I’m not going to go into how to do data validation in spreadsheets, but here are links for:</p>
<ul>
<li><a href="https://support.microsoft.com/en-us/topic/fef13169-0a84-4b92-a5ab-d856b0d7c1f7#ID0EAABAAA=Data_validation&amp;ID0EBBD=Data_validation">Microsoft Excel</a></li>
<li><a href="https://cloud.google.com/blog/products/g-suite/pro-tip-how-create-dropdown-list-google-sheets-and-pointers-conditional-formatting">Google Sheets</a></li>
</ul>
<p>I’m sure there are plenty of other online resources too.</p>
<p><strong>One thing I really like</strong> about Google Sheets is that you can set your sheet to work in “offline mode” on your phone or tablet, which allows you to do data entry directly into the sheet in the field, which then syncs to your Google Drive when you go back online (I’d imagine you can do the same with MS Excel and One Drive, but I’ve never tried it). This really saves time (and errors) on entering written field data sheets into a spreadsheet later, and allows you to take advantage of the data validation rules in the field, which are harder to set up with pen or pencil… The only issue is that if you make a typo etc that isn’t caught by the data validation you’re likely to be stuck with it…</p>
<p><br></p>
</div>
<div id="reproducibility---start-as-you-mean-to-finish" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Reproducibility - start as you mean to finish<a href="tidy-data.html#reproducibility---start-as-you-mean-to-finish" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that you have your data, the temptation is to open an R script and get analyzing, or worse yet, open your raw data file in a spreadsheeting programme and crack out a few simple graphs… <em><strong>WAIT!!!</strong></em></p>
<ol style="list-style-type: upper-alpha">
<li><p><strong>Never do data analyses in your raw data files!!!</strong> These are your raw data, and they should stay that way. In fact, they should be set to be <em>read-only</em> so that you can’t edit them even if you wanted to. If you were to edit these files directly and make a mistake, like say sort a column without sorting the rest of the table, that’s it! Alles is kaput! You need your raw data files so that you have somewhere to look when you suspect you’ve done something bad to your data.</p></li>
<li><p><strong>Beyond data management, there’s code management</strong>, and version control software like <a href="https://github.com/">GitHub</a> is your friend, providing a backup of all your scripts, versioning (i.e. a record of changes of your scripts that you can <em>revert</em> should you need to - i.e. no more scripts named “analysis_final_final_FINAL.R”) and is a great tool for collaboration and sharing. In fact, GitHub can manage much more than just code, and can host your manuscript, output figures and tables, and even small datasets. Here’s a <a href="https://docs.github.com/en/get-started/quickstart/hello-world">quick start guide for GitHub</a> that shows you the basic functionality in ~10 minutes. I highly recommend working through it before you move on to the next steps…</p></li>
<li><p><strong>The trick to reproducible research is to start as you mean to finish.</strong> By this I mean that it is much easier to produce a reproducible research workflow if you work reproducibly from the start, rather than retrofitting a bunch of data and code you’ve already analyzed. This also means that you can reap the benefits of reproducibility during your project, which includes things like easier finding and fixing of errors, easier collaboration, simple splitting of the workflow if you decide that the project could lead to multiple publications, etc.</p></li>
</ol>
<p>The next 2 sections are covered in the quick start guide you should have worked through, but I add a few specific comments, and are essentially what you need to do to get set up with a GitHub repo before you get coding.</p>
<p><br></p>
<div id="creating-a-git-repository-or-repo-for-short" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Creating a Git repository (or repo for short)<a href="tidy-data.html#creating-a-git-repository-or-repo-for-short" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Go to your online GitHub account (e.g. <a href="https://github.com/jslingsby" class="uri">https://github.com/jslingsby</a>)</li>
<li>Click on the <code>+</code> in the top-right and select <code>New repository</code></li>
<li>Give your repository a name and description</li>
<li>Choose whether you want the repo to be public or private (e.g. if you’re going to include sensitive data or otherwise don’t want the world to see what you’re doing)</li>
<li>I usually <code>Add a README</code> file, that allows you to write a description of the project, explain the contents of the repo, etc</li>
<li>I also usually <code>Add .gitignore</code> and choose <code>R</code> from the templates. This is a file that allows you to list files and folders that you don’t want GitHub to sync</li>
</ol>
<ul>
<li>e.g. you may want to have a “bigdata” folder on your local machine with files too large to sync to GitHub (~&gt;50MB), although check out <a href="https://docs.github.com/en/repositories/working-with-files/managing-large-files/about-git-large-file-storage">Git Large File Storage</a>, or an “output” folder with large figures etc that you can easily reproduce from the code</li>
</ul>
<ol start="7" style="list-style-type: decimal">
<li>Add a license if you want too</li>
<li>Click <code>Create repository</code></li>
</ol>
<p><br></p>
</div>
<div id="cloning-your-repo-to-your-local-machine" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Cloning your repo to your local machine<a href="tidy-data.html#cloning-your-repo-to-your-local-machine" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Open RStudio on your laptop (you should already have RStudio and GitHub set up as per the instructions in section <a href="index.html#setup">1.4</a>)</li>
<li>Copy the URL to the repo you just created (e.g. <a href="https://github.com/jslingsby/demo" class="uri">https://github.com/jslingsby/demo</a>)</li>
<li>In RStudio:</li>
</ol>
<ul>
<li>in the top-right of the window you’ll see <code>Project: (None)</code> - click on it and select <code>New Project</code> then <code>Version Control</code> then <code>Git</code></li>
<li>In the <code>Repository URl:</code> box paste the URL to your repo</li>
<li><code>Project directory name</code> should fill automatically</li>
<li>For <code>Create project as subdirectory of:</code> hit <code>Browse</code> and navigate through your file system to where you want to put your folder for storing your Git repositories. I recommend something like <code>~Documents/GIT</code> (If you’ve used Git before you may have set this already and can skip this step)</li>
<li>Click <code>Create Repository</code></li>
</ul>
<p>You should now see the name of your project/repo in the top-right corner of RStudio where previously you saw <code>Project: (None)</code> and you’re good to go.</p>
<p>Now that you’re working on your local machine you need to set up a folder structure for code, output, data etc (using RStudio or your file explorer). Then you can open an R script, or better yet, an <a href="https://rmarkdown.rstudio.com/lesson-1.html">RMarkdown</a> or (better yet) <a href="https://quarto.org/">Quarto</a> document that allows you to write text and embed code and images etc.</p>
<p><br></p>
</div>
<div id="keeping-your-online-git-repository-in-sync" class="section level3 hasAnchor" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Keeping your online Git repository in sync<a href="tidy-data.html#keeping-your-online-git-repository-in-sync" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once you’ve added some content to your project (the local version of the Git repository), you want to sync it back to the online repository…</p>
<ol style="list-style-type: decimal">
<li>From the “Git” tab (top-right window in RStudio), click the check boxes next to the files and folders you’ve created. This is equivalent to <em>git add</em> if you were doing this command line in bash or terminal.</li>
<li>Click <code>Commit</code>, enter a log message (notes to yourself or collaborators about what you’re adding), and click <code>Commit</code> again. This is equivalent to <em>git commit</em> in command line.</li>
<li>Now you’re going to “push” the changes to the online repository, but first, it’s always good practice to “pull” any changes from the repository to your local machine first. You do this, because if it was a collaborative project, others may have made changes since you last “pulled”. You may also have made changes to the repo directly in the website… To “pull” changes into RStudio, click the green down arrow (next to “Commit”). If it says “Already up-to-date” you can then “push” your changes up to Github by clicking on the green up arrow. This is equivalent to <em>git push</em>.</li>
</ol>
<p><br></p>
</div>
</div>
<div id="tidy-data-and-data-wrangling" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Tidy data and data wrangling<a href="tidy-data.html#tidy-data-and-data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now you’re finally ready to start interrogating your data! But the raw data probably aren’t in a particularly analysis-friendly format, so you need to start with some data tidying and wrangling. You could do this “manually” in a new, appropriately named, copy of your raw data spreadsheet, but then you may not be able to track the changes you’ve made and errors may creep in. Where possible, it’s best to do this step with code. Most of my projects start with a “00_data_cleaning.R” script or similar to read the raw data and create an analysis-ready dataset. If this script takes a long time to run, I may output a new “clean data” file (or files) so that I don’t need to rerun the script every time.</p>
<p>What is <em>tidy</em> data? I strongly recommend you read this short paper on <strong><a href="http://dx.doi.org/10.18637/jss.v059.i10">how to keep your data Tidy</a></strong> <span class="citation">(<a href="#ref-Wickham2014">Wickham 2014</a>)</span>. Following these principles will make life much easier for you once you get to the analysis step…</p>
<p>Here’s the basic idea in nice illustrations by @allison_horst:</p>
<div class="float">
<img src="img/tidydata_2.jpg" alt="Tidy data principles mean that all datasets follow the same rules. Artwork @allison_horst" />
<div class="figcaption">Tidy data principles mean that all datasets follow the same rules. Artwork @allison_horst</div>
</div>
<p><br></p>
<div class="float">
<img src="img/tidydata_3.jpg" alt="Following the rules simplifies analysis and reduces the diversity of tools required. Artwork @allison_horst" />
<div class="figcaption">Following the rules simplifies analysis and reduces the diversity of tools required. Artwork @allison_horst</div>
</div>
<p><br></p>
<div class="float">
<img src="img/tidydata_1.jpg" alt="The rules are pretty simple and easy to follow. It’s worth investing the effort! Artwork @allison_horst" />
<div class="figcaption">The rules are pretty simple and easy to follow. It’s worth investing the effort! Artwork @allison_horst</div>
</div>
<p><br></p>
<p>These figures, and the readings for the course, highlight that there are many reasons why you should keep your data in <em>tidy</em> format <span class="citation">(<a href="#ref-Wickham2014">Wickham 2014</a>)</span>. Unfortunately, as my spreadsheet above demonstrates, it’s not always convenient to enter your data in <em>tidy</em> format, so you inevitably end out needing to do post-entry data formatting. A major problem here is that doing the reformatting manually creates opportunities for introducing errors. This is where it’s a major advantage if you know how to <em>wrangle</em> your data in a coding language like R or Python. This is not to say that coded data wrangling cannot introduce errors!!! You should always do sanity checks!!! But I’d suspect that most of the errors you can make with code will be very obvious, because the outcome is usually spectacularly different to the input.</p>
<p>The rest of this chapter provides a demonstration of some of the functionality of the <a href="https://www.tidyverse.org/"><em>tidyverse</em></a> set of R packages, and some of the more common data wrangling errors made in R.</p>
<p><br></p>
<div id="the-dataset" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> The dataset<a href="tidy-data.html#the-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This tutorial relies on the <a href="https://docs.google.com/spreadsheets/d/1U9yNaJFyd6kb5vlKzHhcgM6sLEzw_xVtQxewpH7k0Ho/edit?usp=sharing">BIO3018F prac data mentioned previously</a>. See <a href="https://plantecolo.gy/teaching/bio3018f/">here</a> if you’d like more details about the data and practical.</p>
<p><br></p>
</div>
<div id="motivation" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> The motivation…<a href="tidy-data.html#motivation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here’s a cool trick. Don’t freak out that I haven’t commented the code with explanations. We’ll break this down in the following sections.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="tidy-data.html#cb3-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-2"><a href="tidy-data.html#cb3-2" tabindex="-1"></a><span class="fu">library</span>(readxl) </span>
<span id="cb3-3"><a href="tidy-data.html#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="tidy-data.html#cb3-4" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="tidy-data.html#cb3-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CanopyCover =</span> <span class="dv">100</span> <span class="sc">-</span> <span class="fl">4.16</span><span class="sc">*</span>Densiometer) <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="tidy-data.html#cb3-6" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(<span class="st">&quot;SoilColour&quot;</span>, <span class="st">&quot;Densiometer&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="tidy-data.html#cb3-7" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;PercentBareSoil&quot;</span>, <span class="st">&quot;SoilPH&quot;</span>, <span class="st">&quot;Dung&quot;</span>, <span class="st">&quot;CanopyCover&quot;</span>),</span>
<span id="cb3-8"><a href="tidy-data.html#cb3-8" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="tidy-data.html#cb3-9" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb3-10"><a href="tidy-data.html#cb3-10" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> value, <span class="at">x =</span> Site)) <span class="sc">+</span></span>
<span id="cb3-11"><a href="tidy-data.html#cb3-11" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb3-12"><a href="tidy-data.html#cb3-12" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(variable), <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="data-management_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>In just 9 lines of code (and it could be fewer if I was being less neat) I read in the raw data with <code>read_xlsx</code>, created a new column that’s a transformation of an existing one with <code>mutate</code>, dropped unwanted variables with <code>select</code> (I didn’t actually need to do this, I was just showing off…), reshaped the entire dataframe from wide format (not <em>tidy</em>) to long format (<em>tidy</em>) with <code>pivot_longer</code> and made a pretty boxplot (<code>ggplot</code> + <code>geom_boxplot</code>) with rotated x-axis text (<code>theme</code>) and separate facets for each environmental variable (<code>facet_wrap</code>).</p>
<p><br></p>
<p>You too can have these superhero powers!</p>
<p>The rest of this chapter is focused on reading in data and various tricks to wrangle it into different formats, join separate tables, etc. Plotting you will have to learn yourself, but I may show a few simple examples.</p>
<p><br></p>
</div>
</div>
<div id="reading-in-data" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Reading in data<a href="tidy-data.html#reading-in-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R has a number of different packages to read in data, and there’s even a few that work with different tabular data types just within the <em>tidyverse</em>. These include:</p>
<ul>
<li><a href="https://readr.tidyverse.org/"><em>readr</em></a> for text files with values separated with tab, comma, or some other delimiter (.txt, .csv, .tsv file extensions)</li>
<li><a href="https://readxl.tidyverse.org/"><em>readxl</em></a> for Microsoft Excel files (.xls or .xlsx)</li>
<li><a href="https://googlesheets4.tidyverse.org/"><em>googlesheets4</em></a> for reading data directly from a Google Sheet</li>
</ul>
<p>There’s <a href="https://www.tidyverse.org/packages/#import">others too</a> that can scrape data from web pages, interact with web APIs, or query local or online databases.</p>
<p>Fortunately, within the <em>tidyverse</em>, similar syntax can be used across most data import packages. Check out the <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-import.pdf">cheat sheet</a>.</p>
<div id="read-google-sheets-with-googlesheets4" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Read Google Sheets with <em>googlesheets4</em><a href="tidy-data.html#read-google-sheets-with-googlesheets4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Since I gave you the link to a Google Sheet above, you should be able to read the data directly into R using that URL with the <em>googlesheets4</em> package. Note that it may ask you to authenticate your Google account. You can do this with your personal or UCT account.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="tidy-data.html#cb4-1" tabindex="-1"></a><span class="co"># First let&#39;s call the libraries with the functions we want to use</span></span>
<span id="cb4-2"><a href="tidy-data.html#cb4-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb4-3"><a href="tidy-data.html#cb4-3" tabindex="-1"></a><span class="fu">library</span>(googlesheets4) <span class="co"># while googlesheets4 is part of the tidyverse, and installed when you install the tidyverse, it isn&#39;t a core package, so you have to call it separately</span></span>
<span id="cb4-4"><a href="tidy-data.html#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="tidy-data.html#cb4-5" tabindex="-1"></a><span class="co"># You may need to tell Googlesheets what account to use (of your own) using the function gs4_auth(), e.g. gs4_auth(email = &quot;myemail@gmail.com&quot;), but in this case we can just tell it not to authenticate as the Google Sheet is publicly accessible</span></span>
<span id="cb4-6"><a href="tidy-data.html#cb4-6" tabindex="-1"></a><span class="fu">gs4_deauth</span>()</span>
<span id="cb4-7"><a href="tidy-data.html#cb4-7" tabindex="-1"></a></span>
<span id="cb4-8"><a href="tidy-data.html#cb4-8" tabindex="-1"></a><span class="co"># Now let&#39;s have a look at the names of the worksheets (tabs) within the spreadsheet</span></span>
<span id="cb4-9"><a href="tidy-data.html#cb4-9" tabindex="-1"></a><span class="fu">sheet_names</span>(<span class="st">&quot;https://docs.google.com/spreadsheets/d/1U9yNaJFyd6kb5vlKzHhcgM6sLEzw_xVtQxewpH7k0Ho/edit?usp=sharing&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Sites&quot;        &quot;Traits&quot;       &quot;Species&quot;      &quot;RangeLimits&quot;  &quot;RangeSpecies&quot;</code></pre>
<p>Sometimes it shows lots of garble about the online authentication, but finally it shows us that there are five worksheets in the spreadsheet.</p>
<p>Let’s read in the “Sites” sheet and call it <code>edat</code> for “environmental data”, and then print a summary.</p>
<blockquote>
<p>WARNING - running the name of a data object in R is usually a bad idea. It typically then shows you every value in the dataset, which can be hundreds of thousands of values! Tidyverse packages just show you a summary and the first few rows of data, which is nice…</p>
</blockquote>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="tidy-data.html#cb6-1" tabindex="-1"></a>edat <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(<span class="st">&quot;https://docs.google.com/spreadsheets/d/1U9yNaJFyd6kb5vlKzHhcgM6sLEzw_xVtQxewpH7k0Ho/edit?usp=sharing&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>) <span class="co"># read in data</span></span></code></pre></div>
<pre><code>## ✔ Reading from &quot;pracdatasheet&quot;.</code></pre>
<pre><code>## ✔ Range &#39;&#39;Sites&#39;&#39;.</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="tidy-data.html#cb9-1" tabindex="-1"></a>edat <span class="co"># print a summary of the data</span></span></code></pre></div>
<pre><code>## # A tibble: 24 × 8
##    Site         Point SitePoint       PercentBareSoil SoilPH SoilColour  Dung Densiometer
##    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;                     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt;
##  1 grass        SE    grass_SE                      0   4.6  7.5YR3/2       0          15
##  2 renosterveld SE    renosterveld_SE               5   5.4  10YR3/2        3          14
##  3 invasion     SE    invasion_SE                   0   3.79 10YR2/1        0           0
##  4 sand         SE    sand_SE                      10   4.82 10YR6/4        0           5
##  5 sandstone    SE    sandstone_SE                  5   4.91 10YR3/2        0           2
##  6 limestone    SE    limestone_SE                  0   6.48 10YR2/1        0           9
##  7 grass        NE    grass_NE                      0   5.13 10YR2/2        0          13
##  8 renosterveld NE    renosterveld_NE              30   5.7  7.5YR4/3       2          20
##  9 invasion     NE    invasion_NE                   5   3.7  10YR5/1        0           0
## 10 sand         NE    sand_NE                       8   4.54 10YR4/3        0           4
## # ℹ 14 more rows</code></pre>
<p>Note that you can also create and write to a Google Sheet with <code>gs4_create()</code> and <code>write_sheet()</code></p>
</div>
<div id="downloading-google-sheets-with-r" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Downloading Google Sheets with R<a href="tidy-data.html#downloading-google-sheets-with-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If your spreadsheet is large, reading them into R from online Google Sheets can be slow. In this case you may want to download them as local MS Excel (.xlsx) files. Fortunately, even the download step can be scripted in R with functions from <code>library(googledrive)</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="tidy-data.html#cb11-1" tabindex="-1"></a><span class="fu">library</span>(googledrive)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;googledrive&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:googlesheets4&#39;:
## 
##     request_generate, request_make</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="tidy-data.html#cb14-1" tabindex="-1"></a><span class="fu">drive_deauth</span>() <span class="co"># Or specify your email with drive_auth(email = &quot;jenny@example.com&quot;)</span></span>
<span id="cb14-2"><a href="tidy-data.html#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="tidy-data.html#cb14-3" tabindex="-1"></a><span class="fu">drive_download</span>(<span class="at">file =</span> <span class="st">&quot;https://docs.google.com/spreadsheets/d/1U9yNaJFyd6kb5vlKzHhcgM6sLEzw_xVtQxewpH7k0Ho/edit?usp=sharing&quot;</span>, </span>
<span id="cb14-4"><a href="tidy-data.html#cb14-4" tabindex="-1"></a>               <span class="at">path =</span> <span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## File downloaded:</code></pre>
<pre><code>## • &#39;pracdatasheet&#39; &lt;id: 1U9yNaJFyd6kb5vlKzHhcgM6sLEzw_xVtQxewpH7k0Ho&gt;</code></pre>
<pre><code>## Saved locally as:</code></pre>
<pre><code>## • &#39;data/pracdatasheet.xlsx&#39;</code></pre>
</div>
<div id="read-microsoft-excel-files-with-readxl" class="section level3 hasAnchor" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Read Microsoft Excel files with <em>readxl</em><a href="tidy-data.html#read-microsoft-excel-files-with-readxl" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Reading data in directly from Google Sheets can be super handy, but it requires an internet connection, and can become quite slow if your dataset gets big. In that case, it’s very easy to download Google Sheets as Microsoft Excel files and read them in using functions in the <em>readxl</em> package.</p>
<p>First, we may want to know what files are in our data folder, which we can do with the base R function <code>list.files()</code>. Note that this function can be very handy if you have lots of files to process, like photos, etc.</p>
<blockquote>
<p><strong>NOTE:</strong> you need to replace the working directory folder path (“data” here) with wherever you put the data on your computer. In my case, “data” is a folder in the git repo (and thus R project), so R knows where to look.</p>
</blockquote>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="tidy-data.html#cb19-1" tabindex="-1"></a><span class="co"># get list of files in the folder (change to your own)</span></span>
<span id="cb19-2"><a href="tidy-data.html#cb19-2" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&quot;data&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;pracdatasheet.xlsx&quot;                   &quot;Reproducibility Survey Raw Data.xlsx&quot;</code></pre>
<p>Let’s have a look at the <code>pracdatasheet.xlsx</code> file</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="tidy-data.html#cb21-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb21-2"><a href="tidy-data.html#cb21-2" tabindex="-1"></a><span class="fu">library</span>(readxl) <span class="co">#while readxl is part of the tidyverse and installed when you install the tidyverse, it isn&#39;t a core package, so you have to call it separately</span></span>
<span id="cb21-3"><a href="tidy-data.html#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="tidy-data.html#cb21-4" tabindex="-1"></a><span class="co"># See what sheets are in the Excel workbook</span></span>
<span id="cb21-5"><a href="tidy-data.html#cb21-5" tabindex="-1"></a><span class="fu">excel_sheets</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Sites&quot;        &quot;Traits&quot;       &quot;Species&quot;      &quot;RangeLimits&quot;  &quot;RangeSpecies&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="tidy-data.html#cb23-1" tabindex="-1"></a><span class="co"># Read in data</span></span>
<span id="cb23-2"><a href="tidy-data.html#cb23-2" tabindex="-1"></a>edat <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>)</span>
<span id="cb23-3"><a href="tidy-data.html#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="tidy-data.html#cb23-4" tabindex="-1"></a><span class="co"># Print a summary </span></span>
<span id="cb23-5"><a href="tidy-data.html#cb23-5" tabindex="-1"></a>edat</span></code></pre></div>
<pre><code>## # A tibble: 24 × 8
##    Site         Point SitePoint       PercentBareSoil SoilPH SoilColour  Dung Densiometer
##    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;                     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt;
##  1 grass        SE    grass_SE                      0   4.6  7.5YR3/2       0          15
##  2 renosterveld SE    renosterveld_SE               5   5.4  10YR3/2        3          14
##  3 invasion     SE    invasion_SE                   0   3.79 10YR2/1        0           0
##  4 sand         SE    sand_SE                      10   4.82 10YR6/4        0           5
##  5 sandstone    SE    sandstone_SE                  5   4.91 10YR3/2        0           2
##  6 limestone    SE    limestone_SE                  0   6.48 10YR2/1        0           9
##  7 grass        NE    grass_NE                      0   5.13 10YR2/2        0          13
##  8 renosterveld NE    renosterveld_NE              30   5.7  7.5YR4/3       2          20
##  9 invasion     NE    invasion_NE                   5   3.7  10YR5/1        0           0
## 10 sand         NE    sand_NE                       8   4.54 10YR4/3        0           4
## # ℹ 14 more rows</code></pre>
<p>A handy feature of <code>read_sheet</code> and <code>read_xlsx</code> is the <code>range =</code> option, which allows you to <strong>select only the regions of the worksheet you want</strong> using the usual syntax you’d use in Excel, e.g. <code>A1:Z100</code> would give you columns A to Z and rows 1 to 100.</p>
<p>Here’s an example skipping the first two columns:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="tidy-data.html#cb25-1" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>, <span class="at">range =</span> <span class="st">&quot;C1:H25&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 24 × 6
##    SitePoint       PercentBareSoil SoilPH SoilColour  Dung Densiometer
##    &lt;chr&gt;                     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt;
##  1 grass_SE                      0   4.6  7.5YR3/2       0          15
##  2 renosterveld_SE               5   5.4  10YR3/2        3          14
##  3 invasion_SE                   0   3.79 10YR2/1        0           0
##  4 sand_SE                      10   4.82 10YR6/4        0           5
##  5 sandstone_SE                  5   4.91 10YR3/2        0           2
##  6 limestone_SE                  0   6.48 10YR2/1        0           9
##  7 grass_NE                      0   5.13 10YR2/2        0          13
##  8 renosterveld_NE              30   5.7  7.5YR4/3       2          20
##  9 invasion_NE                   5   3.7  10YR5/1        0           0
## 10 sand_NE                       8   4.54 10YR4/3        0           4
## # ℹ 14 more rows</code></pre>
<blockquote>
<p>NOTE: I’m just doing this for demonstration purposes. This particular dataset is already a rectangular table (or data frame), so it would be easiest to just read the whole thing in and subset the columns you want with <code>select()</code> and the rows with <code>filter()</code>, both from the <code>dplyr</code> package and a core part of <code>tidyverse</code> - demonstrated later.</p>
</blockquote>
<p>You can also be sneaky and read multiple separate chunks and then stitch them together, e.g.</p>
<ul>
<li>Reading in different columns and binding them together:</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="tidy-data.html#cb27-1" tabindex="-1"></a><span class="fu">bind_cols</span>(<span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>, <span class="at">range =</span> <span class="st">&quot;A1:B25&quot;</span>),</span>
<span id="cb27-2"><a href="tidy-data.html#cb27-2" tabindex="-1"></a>      <span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>, <span class="at">range =</span> <span class="st">&quot;G1:H25&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 24 × 4
##    Site         Point  Dung Densiometer
##    &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;
##  1 grass        SE        0          15
##  2 renosterveld SE        3          14
##  3 invasion     SE        0           0
##  4 sand         SE        0           5
##  5 sandstone    SE        0           2
##  6 limestone    SE        0           9
##  7 grass        NE        0          13
##  8 renosterveld NE        2          20
##  9 invasion     NE        0           0
## 10 sand         NE        0           4
## # ℹ 14 more rows</code></pre>
<ul>
<li>Or by row:</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="tidy-data.html#cb29-1" tabindex="-1"></a><span class="fu">bind_rows</span>(<span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>, <span class="at">range =</span> <span class="st">&quot;C1:H15&quot;</span>),</span>
<span id="cb29-2"><a href="tidy-data.html#cb29-2" tabindex="-1"></a>      <span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>, <span class="at">range =</span> <span class="st">&quot;C16:H25&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 23 × 12
##    SitePoint   PercentBareSoil SoilPH SoilColour  Dung Densiometer invasion_SW `10.0` `3.93`
##    &lt;chr&gt;                 &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
##  1 grass_SE                  0   4.6  7.5YR3/2       0          15 &lt;NA&gt;            NA     NA
##  2 renosterve…               5   5.4  10YR3/2        3          14 &lt;NA&gt;            NA     NA
##  3 invasion_SE               0   3.79 10YR2/1        0           0 &lt;NA&gt;            NA     NA
##  4 sand_SE                  10   4.82 10YR6/4        0           5 &lt;NA&gt;            NA     NA
##  5 sandstone_…               5   4.91 10YR3/2        0           2 &lt;NA&gt;            NA     NA
##  6 limestone_…               0   6.48 10YR2/1        0           9 &lt;NA&gt;            NA     NA
##  7 grass_NE                  0   5.13 10YR2/2        0          13 &lt;NA&gt;            NA     NA
##  8 renosterve…              30   5.7  7.5YR4/3       2          20 &lt;NA&gt;            NA     NA
##  9 invasion_NE               5   3.7  10YR5/1        0           0 &lt;NA&gt;            NA     NA
## 10 sand_NE                   8   4.54 10YR4/3        0           4 &lt;NA&gt;            NA     NA
## # ℹ 13 more rows
## # ℹ 3 more variables: `5Y2.5/1` &lt;chr&gt;, `0.0` &lt;dbl&gt;, `3.0` &lt;dbl&gt;</code></pre>
<p>Note that the <code>skip =</code> and <code>nmax =</code> options of these functions are somewhat related and tell the function the number of rows to skip before reading anything and the maximum number of rows to read respectively.</p>
<p><br></p>
</div>
<div id="reading-text-files-with-readr" class="section level3 hasAnchor" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Reading text files with <em>readr</em><a href="tidy-data.html#reading-text-files-with-readr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>I’m not going to go through this package, but it’s important to note that <strong>both Microsoft Excel and Google Sheets are proprietary</strong>. In other words these are not open formats and are not necessarily stable in the long term. <strong>YOU SHOULD NOT STORE YOUR DATA IN THESE FORMATS</strong>, and as such they should not be used if you want your workflow to be reproducible! The safest is to save each worksheet from the spreadsheet as separate comma or tab delimited text files, which you can read in with functions from <em>readr</em> like <code>read_csv</code> or <code>read_delim</code>. Try <code>?readr</code> for details on the package and functions.</p>
<p><br></p>
</div>
<div id="writing-out-files" class="section level3 hasAnchor" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> Writing out files!<a href="tidy-data.html#writing-out-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In previous iteration of this course I didn’t cover this as I must have thought it was a given, but you can of course write files out too!</p>
<p><a href="https://readr.tidyverse.org/reference/write_delim.html">Here’s</a> a bunch of ways to write out different formats with <code>readr</code>. As mentioned above, check out Google Sheets options by typing <code>?googlesheets4::gs4_create()</code> into your console to find out about creating Google Sheets and <code>?googlesheets4::write_sheet()</code> for writing to sheets.</p>
<p><br></p>
</div>
</div>
<div id="a-quick-aside-on-data-types" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> A quick aside on data types<a href="tidy-data.html#a-quick-aside-on-data-types" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You’ll note <code>&lt;chr&gt;</code> and <code>&lt;dbl&gt;</code> in the output when we print a summary of the data. These indicate that the data types (or classes) for those columns are “character” and “double” respectively…</p>
<ul>
<li>R’s basic data types are character, integer, numeric (or double, they are synonymous), date and logical. There are a number of other special types, but this covers most of those you’ll commonly deal with.
<ul>
<li><code>integer</code> is for whole numbers (i.e. no decimals)</li>
<li><code>numeric</code> or <code>double</code> (double precision floating point numbers) are <em>real numbers</em> - i.e. they include decimal places.
<ul>
<li>For reasons I won’t explain, storing data as real numbers takes up far more memory than integers. Obviously, lots of numbers we work with are real numbers, so we need to be able to work with them. Interestingly, large data storage and transmission projects (e.g. satellite remote sensing) often do tricks like multiply values by some constant so that all data stored are integers. You need to correct by the constant during your analysis to get values in the actual unit of measurement.</li>
</ul></li>
<li><code>character</code> is for letters, words, sentences or mixed strings (i.e. letters and digits)</li>
<li><code>factor</code> is a set of levels (often treatments) that you’d use in an analysis. They are very useful, but they are also VERY likely to trip you up at some stage (I’ll explain why in a minute)!!!
<ul>
<li>factors are essentially numerical codings of character data in some order. Using numerical coding is useful, because you can order your levels in an analysis - e.g. <em>Treatment A, Treatment B, Control,</em> etc. They are also useful, because they can store data efficiently. For example, if your analysis has thousands of data points, it uses much less memory to recode the treatments above as <em>1, 2, 3,</em> etc and just store one copy of the <code>levels</code> (what we call the labels in a factor).</li>
</ul></li>
<li><code>logical</code> is the outcome of a conditional statement (i.e. values can only be <code>TRUE</code> or <code>FALSE</code>)
<ul>
<li>it is actually just a special case of factor data where FALSE = 0 and TRUE = 1, so if you take the sum of a vector of <code>logical</code> values, it will give you a count of the number of <code>TRUE</code> cases. That said, R treats logical in specific ways that can’t be done with true factors and vice versa, so forget I said that.</li>
</ul></li>
<li><code>date</code> once again is a special case of a factor, but again, R treats dates in specific ways that it wouldn’t treat a normal factor. Dates are thus stored as numbers, where each day has a unique value. For R, by default the numbering begins at the 1st January 1970 (the “origin”), which is coded as “0” - try run the code <code>as.numeric(as.Date("1970-01-01"))</code>, which coerced the date “1970-01-01” to a number. You can change the origin to whatever you prefer, and this can be very important, because different software use different origins…</li>
</ul></li>
</ul>
<p><br></p>
<p>Here’re some code examples to try to drive this home, using the built in vector <code>letters</code></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="tidy-data.html#cb31-1" tabindex="-1"></a>letters</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot; &quot;t&quot; &quot;u&quot; &quot;v&quot;
## [23] &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<p>You can check the class of data using the function <code>class()</code></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="tidy-data.html#cb33-1" tabindex="-1"></a><span class="fu">class</span>(letters)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>And typically convert (or coerce) between classes using <code>as.</code> followed by the class you want, e.g.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="tidy-data.html#cb35-1" tabindex="-1"></a><span class="fu">as.factor</span>(letters)</span></code></pre></div>
<pre><code>##  [1] a b c d e f g h i j k l m n o p q r s t u v w x y z
## Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z</code></pre>
<p>Here it shows us that we have a factor with 26 values with 26 unique levels. You wouldn’t really use a factor class if all values are unique though. Here’s a better example.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="tidy-data.html#cb37-1" tabindex="-1"></a><span class="fu">as.factor</span>(<span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">8</span>))</span></code></pre></div>
<pre><code>##  [1] a b c a b c a b c a b c a b c a b c a b c a b c
## Levels: a b c</code></pre>
<p>And to prove that the factor represents the levels as a set of numbers:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="tidy-data.html#cb39-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(<span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">8</span>)))</span></code></pre></div>
<pre><code>##  [1] 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
<p>Note that this doesn’t work if we try to coerce the the letters to numbers without making them a factor first:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="tidy-data.html#cb41-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">8</span>))</span></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>##  [1] NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA</code></pre>
<p><br></p>
<p><strong>Here’s how factors will catch you out, sooner or later…</strong></p>
<p>As I said earlier, storing data as a factor can be less memory intensive. R takes advantage of this in that some functions (especially when reading in data) try to identify the most sensible data type and store it in R’s memory as such. So for example, if all the values in a column of a table are whole numbers, R will read it in as class integer, which requires less memory than class numeric (or double). By the same token, if the column is text and some values are repeated, R will often make it class factor.</p>
<p>This is great, but it can catch you out as follows. If a column of numbers has any text in it, R will make the whole column class character. If many of the values are repeated, it may even make it class factor for efficiency. <strong><em>This happens a lot!</em></strong>, especially if someone makes an error and types in an O instead of a 0, or denotes missing data with a “.” or anything else other than “NA”.</p>
<p>This means that whenever you try to pass the data to a function that’s expecting numeric data, it will give you an error. Usually something along the lines of <strong>“Error in … expected class ‘double’”</strong> or <strong>“object cannot be coerced to type ‘double’”</strong>, etc. The cause of this error message may not be obvious to the newbie, but now you know.</p>
<p>Another problem is that even though R typically orders factors in alphabetical or numerical order, <strong>it is possible to create a mismatch between the actual number and the order in the levels.</strong> This can create all kinds of issues, sometimes large (which are easier to spot), sometimes subtle (which is often more problematic, because it’s harder to spot).</p>
<p>Here are some code examples. Firstly, where a number is treated as a character.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="tidy-data.html#cb44-1" tabindex="-1"></a>hmm <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">4</span>, <span class="st">&quot;0&quot;</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">1</span>), <span class="dv">3</span>)</span>
<span id="cb44-2"><a href="tidy-data.html#cb44-2" tabindex="-1"></a></span>
<span id="cb44-3"><a href="tidy-data.html#cb44-3" tabindex="-1"></a>hmm</span></code></pre></div>
<pre><code>##  [1] &quot;4&quot; &quot;0&quot; &quot;2&quot; &quot;5&quot; &quot;3&quot; &quot;1&quot; &quot;4&quot; &quot;0&quot; &quot;2&quot; &quot;5&quot; &quot;3&quot; &quot;1&quot; &quot;4&quot; &quot;0&quot; &quot;2&quot; &quot;5&quot; &quot;3&quot; &quot;1&quot;</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="tidy-data.html#cb46-1" tabindex="-1"></a><span class="fu">class</span>(hmm)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>In this case the vector is class character, but if we’d read it in from a file it would likely have been made a factor. Let’s see what happens when we coerce it to factor:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="tidy-data.html#cb48-1" tabindex="-1"></a><span class="fu">as.factor</span>(hmm)</span></code></pre></div>
<pre><code>##  [1] 4 0 2 5 3 1 4 0 2 5 3 1 4 0 2 5 3 1
## Levels: 0 1 2 3 4 5</code></pre>
<p>Seems ok?</p>
<p>What if we try to coerce that factor to a number?</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="tidy-data.html#cb50-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(hmm))</span></code></pre></div>
<pre><code>##  [1] 5 1 3 6 4 2 5 1 3 6 4 2 5 1 3 6 4 2</code></pre>
<p>Ouch! While the level labels start at 0, the numeric representation of the levels start at 1, so coercing them to numbers creates a mismatch…</p>
<p><strong>If you need to fix this, you should always coerce to character first.</strong></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="tidy-data.html#cb52-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="fu">as.factor</span>(hmm)))</span></code></pre></div>
<pre><code>##  [1] 4 0 2 5 3 1 4 0 2 5 3 1 4 0 2 5 3 1</code></pre>
<p>What about if we insert a character instead of a number, like “O” instead of “0”</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="tidy-data.html#cb54-1" tabindex="-1"></a>hmm2 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">4</span>, <span class="st">&quot;O&quot;</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">1</span>), <span class="dv">3</span>)</span>
<span id="cb54-2"><a href="tidy-data.html#cb54-2" tabindex="-1"></a></span>
<span id="cb54-3"><a href="tidy-data.html#cb54-3" tabindex="-1"></a>hmm2</span></code></pre></div>
<pre><code>##  [1] &quot;4&quot; &quot;O&quot; &quot;2&quot; &quot;5&quot; &quot;3&quot; &quot;1&quot; &quot;4&quot; &quot;O&quot; &quot;2&quot; &quot;5&quot; &quot;3&quot; &quot;1&quot; &quot;4&quot; &quot;O&quot; &quot;2&quot; &quot;5&quot; &quot;3&quot; &quot;1&quot;</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="tidy-data.html#cb56-1" tabindex="-1"></a><span class="fu">class</span>(hmm2)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="tidy-data.html#cb58-1" tabindex="-1"></a><span class="fu">as.factor</span>(hmm2)</span></code></pre></div>
<pre><code>##  [1] 4 O 2 5 3 1 4 O 2 5 3 1 4 O 2 5 3 1
## Levels: 1 2 3 4 5 O</code></pre>
<p>Interesting, the “O” is now the 6th level, not the first… What if we coerce to numeric?</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="tidy-data.html#cb60-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(hmm2))</span></code></pre></div>
<pre><code>##  [1] 4 6 2 5 3 1 4 6 2 5 3 1 4 6 2 5 3 1</code></pre>
<p>Oops!!! Converting all your zeroes to sixes is really going to mess with your results!!!</p>
<p>And if we try our <code>as.character</code> fix?</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="tidy-data.html#cb62-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">as.character</span>(<span class="fu">as.factor</span>(hmm2)))</span></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>##  [1]  4 NA  2  5  3  1  4 NA  2  5  3  1  4 NA  2  5  3  1</code></pre>
<p>R doesn’t know what to do with the Os, so it makes them NA and gives you a warning. Watch out for this, because ignoring the warning and leaving out zero values could seriously bias your results!</p>
</div>
<div id="learning-to-speak-tidyverse" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Learning to speak <em>Tidyverse</em><a href="tidy-data.html#learning-to-speak-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <em>tidyverse</em> packages contain a series of functions that can be thought of as <em>verbs</em>, providing the <em>grammar</em> for you develop code statements.</p>
<p>For example, some of the main functions in <code>library(dplyr)</code> are:</p>
<ul>
<li><code>arrange()</code> - Arrange rows by the values of column</li>
<li><code>select()</code> - Select a subset of columns using their names and types</li>
<li><code>filter()</code> - Subset rows using column values</li>
<li><code>slice()</code> - Subset rows using their positions</li>
<li><code>mutate()</code> - Create, modify, and delete columns</li>
<li><code>group_by()</code> - Group by one or more variables</li>
<li><code>summarise()</code> - Summarise each group to fewer rows</li>
</ul>
<p>(Pro tip: Do yourself a favour and spend some time reading about these functions!)</p>
<p>Binding the <em>verbs</em> together into code “sentences” like the example I gave in section <a href="tidy-data.html#motivation">4.3.2</a> is made possible by the pipe <code>%&gt;%</code> operator, which essentially allows you to pass the output of one function (or verb) to the next without making a new object in memory each time.</p>
<p>i.e. without <code>%&gt;%</code> the code in section <a href="tidy-data.html#motivation">4.3.2</a> would have required me to save 4 intermediate objects into R’s memory as I went. This is clunky, and wastes RAM (computer memory space), often slowing the script down.</p>
<p><br></p>
<p><strong>Here are some example “sentences” using some of the <code>dplyr</code> “verbs”:</strong></p>
<p><em>“Take the environmental data, group it by the Site labels and calculate the means for a specific set of variables for each group.”</em></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="tidy-data.html#cb65-1" tabindex="-1"></a>edat <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="tidy-data.html#cb65-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Site) <span class="sc">%&gt;%</span></span>
<span id="cb65-3"><a href="tidy-data.html#cb65-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">BareSoil =</span> <span class="fu">mean</span>(PercentBareSoil), </span>
<span id="cb65-4"><a href="tidy-data.html#cb65-4" tabindex="-1"></a>            <span class="st">`</span><span class="at">Soil pH</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">mean</span>(SoilPH), </span>
<span id="cb65-5"><a href="tidy-data.html#cb65-5" tabindex="-1"></a>            <span class="at">Dung =</span> <span class="fu">mean</span>(Dung))</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   Site         BareSoil `Soil pH`  Dung
##   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 grass             2.5      4.85  0.25
## 2 invasion          5        3.88  0.5 
## 3 limestone        30        6.33  0   
## 4 renosterveld     21.2      5.47  2.5 
## 5 sand             12        4.81  0.5 
## 6 sandstone        31.2      4.76  0.5</code></pre>
<blockquote>
<p>Note how you can create variables with new names when you <code>summarise</code>, and that you don’t have to apply the same summary function to each (<code>mean</code> in this case, but you can use <code>median</code>, <code>sd</code>, etc). Also notice how enclosing names in “`” allows you to have spaces or special characters in the variable name.</p>
</blockquote>
<p><br></p>
<p><em>“Take the environmental data, filter it for only the renosterveld site, and select a specific set of variables.”</em></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="tidy-data.html#cb67-1" tabindex="-1"></a>edat <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="tidy-data.html#cb67-2" tabindex="-1"></a>  <span class="fu">filter</span>(Site <span class="sc">==</span> <span class="st">&quot;renosterveld&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-3"><a href="tidy-data.html#cb67-3" tabindex="-1"></a>  <span class="fu">select</span>(Point, PercentBareSoil, SoilPH, Dung)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 4
##   Point PercentBareSoil SoilPH  Dung
##   &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 SE                  5   5.4      3
## 2 NE                 30   5.7      2
## 3 SW                 20   5.43     3
## 4 NW                 30   5.35     2</code></pre>
<p><em>“Take the environmental data, filter it for only the renosterveld site, select a specific set of variables, and add a new column that expresses the frequency of dung observed as a proportion of the percentage bare soil exposed.”</em></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="tidy-data.html#cb69-1" tabindex="-1"></a>edat <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="tidy-data.html#cb69-2" tabindex="-1"></a>  <span class="fu">filter</span>(Site <span class="sc">==</span> <span class="st">&quot;renosterveld&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb69-3"><a href="tidy-data.html#cb69-3" tabindex="-1"></a>  <span class="fu">select</span>(Point, PercentBareSoil, SoilPH, Dung) <span class="sc">%&gt;%</span></span>
<span id="cb69-4"><a href="tidy-data.html#cb69-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DungPerSoil =</span> Dung<span class="sc">/</span>PercentBareSoil)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   Point PercentBareSoil SoilPH  Dung DungPerSoil
##   &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;
## 1 SE                  5   5.4      3      0.6   
## 2 NE                 30   5.7      2      0.0667
## 3 SW                 20   5.43     3      0.15  
## 4 NW                 30   5.35     2      0.0667</code></pre>
<p><em>“Take the environmental data, select a specific set of variables, add a new column that expresses the frequency of dung observed as a proportion of the percentage bare soil exposed, and arrange the samples in descending order of the new variable.”</em></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="tidy-data.html#cb71-1" tabindex="-1"></a>edat <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="tidy-data.html#cb71-2" tabindex="-1"></a>  <span class="fu">select</span>(SitePoint, PercentBareSoil, SoilPH, Dung) <span class="sc">%&gt;%</span></span>
<span id="cb71-3"><a href="tidy-data.html#cb71-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DungPerSoil =</span> Dung<span class="sc">/</span>PercentBareSoil) <span class="sc">%&gt;%</span></span>
<span id="cb71-4"><a href="tidy-data.html#cb71-4" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(DungPerSoil))</span></code></pre></div>
<pre><code>## # A tibble: 24 × 5
##    SitePoint       PercentBareSoil SoilPH  Dung DungPerSoil
##    &lt;chr&gt;                     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;
##  1 grass_SW                      0   5.11     1    Inf     
##  2 renosterveld_SE               5   5.4      3      0.6   
##  3 invasion_NW                   5   4.1      2      0.4   
##  4 sand_NW                      10   4.95     2      0.2   
##  5 renosterveld_SW              20   5.43     3      0.15  
##  6 renosterveld_NE              30   5.7      2      0.0667
##  7 renosterveld_NW              30   5.35     2      0.0667
##  8 sandstone_SW                 30   4.7      1      0.0333
##  9 sandstone_NW                 45   4.7      1      0.0222
## 10 sand_SE                      10   4.82     0      0     
## # ℹ 14 more rows</code></pre>
<p>I think you get the picture…</p>
<p><br></p>
</div>
<div id="getting-things-tidy" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Getting things <em>Tidy</em><a href="tidy-data.html#getting-things-tidy" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ok, most of what I’ve shown you is about reading in data and then manipulating it once you have it read in. While this is handy, there are a few more functions you’ll need to help get your data <em>Tidy</em>.</p>
<p>Specifically, <em>Tidy</em> data is where:</p>
<ul>
<li>Every column is variable.</li>
<li>Every row is an observation.</li>
<li>Every cell is a single value.</li>
</ul>
<p>There are many ways to violate this, but some of the most common are:</p>
<ul>
<li>When your data are in “wide” format</li>
<li>When you have data in your column names (often associated with wide format)</li>
<li>When you have multiple variables in a single column (or cell)</li>
<li>When you have gaps in your data</li>
</ul>
<p><br></p>
<blockquote>
<p>“Happy families are all alike; every unhappy family is unhappy in its own way.” - Leo Tolstoy</p>
</blockquote>
<blockquote>
<p>“tidy datasets are all alike but every messy dataset is messy in its own way” - Hadley Wickham</p>
</blockquote>
<p><br></p>
<div id="pivot_longer" class="section level3 hasAnchor" number="4.7.1">
<h3><span class="header-section-number">4.7.1</span> <code>pivot_longer</code><a href="tidy-data.html#pivot_longer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Perhaps the most useful function here is <code>pivot_longer</code> from the <code>tidyr</code> package, which allows you to <strong>convert wide format data to long format</strong>.</p>
<p>Here’s our raw data:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="tidy-data.html#cb73-1" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 24 × 8
##    Site         Point SitePoint       PercentBareSoil SoilPH SoilColour  Dung Densiometer
##    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;                     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt;
##  1 grass        SE    grass_SE                      0   4.6  7.5YR3/2       0          15
##  2 renosterveld SE    renosterveld_SE               5   5.4  10YR3/2        3          14
##  3 invasion     SE    invasion_SE                   0   3.79 10YR2/1        0           0
##  4 sand         SE    sand_SE                      10   4.82 10YR6/4        0           5
##  5 sandstone    SE    sandstone_SE                  5   4.91 10YR3/2        0           2
##  6 limestone    SE    limestone_SE                  0   6.48 10YR2/1        0           9
##  7 grass        NE    grass_NE                      0   5.13 10YR2/2        0          13
##  8 renosterveld NE    renosterveld_NE              30   5.7  7.5YR4/3       2          20
##  9 invasion     NE    invasion_NE                   5   3.7  10YR5/1        0           0
## 10 sand         NE    sand_NE                       8   4.54 10YR4/3        0           4
## # ℹ 14 more rows</code></pre>
<p>Here’s our data in “long” format:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="tidy-data.html#cb75-1" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb75-2"><a href="tidy-data.html#cb75-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;PercentBareSoil&quot;</span>, <span class="st">&quot;SoilPH&quot;</span>, <span class="st">&quot;Dung&quot;</span>, <span class="st">&quot;Densiometer&quot;</span>),</span>
<span id="cb75-3"><a href="tidy-data.html#cb75-3" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) </span></code></pre></div>
<pre><code>## # A tibble: 96 × 6
##    Site         Point SitePoint       SoilColour variable        value
##    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;
##  1 grass        SE    grass_SE        7.5YR3/2   PercentBareSoil  0   
##  2 grass        SE    grass_SE        7.5YR3/2   SoilPH           4.6 
##  3 grass        SE    grass_SE        7.5YR3/2   Dung             0   
##  4 grass        SE    grass_SE        7.5YR3/2   Densiometer     15   
##  5 renosterveld SE    renosterveld_SE 10YR3/2    PercentBareSoil  5   
##  6 renosterveld SE    renosterveld_SE 10YR3/2    SoilPH           5.4 
##  7 renosterveld SE    renosterveld_SE 10YR3/2    Dung             3   
##  8 renosterveld SE    renosterveld_SE 10YR3/2    Densiometer     14   
##  9 invasion     SE    invasion_SE     10YR2/1    PercentBareSoil  0   
## 10 invasion     SE    invasion_SE     10YR2/1    SoilPH           3.79
## # ℹ 86 more rows</code></pre>
<blockquote>
<p>Note 1: I had to leave out the variable <code>SoilColour</code>, because it was a different data type - <code>&lt;chr&gt;</code> as opposed to <code>&lt;dbl&gt;</code>. I could only combine them into the same column if I convered them all to a common data type, which would have to be <code>character</code> in this case, and would not be very useful…</p>
</blockquote>
<blockquote>
<p>Note 2: The columns that you don’t select with the <code>cols =</code> argument just get repeated throughout the data, so be careful when analyzing them because there will be duplicates…</p>
</blockquote>
<p><br></p>
</div>
<div id="pivot_wider" class="section level3 hasAnchor" number="4.7.2">
<h3><span class="header-section-number">4.7.2</span> <code>pivot_wider</code><a href="tidy-data.html#pivot_wider" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can also <strong>convert long format data to wide format</strong> when needed using <code>pivot_wider</code>. You may need to do this when working with biological community data, because most analysis software and R functions prefer “community data matrices” with species as columns and sites as rows. This violates <em>Tidy</em> data, because you have data in your column names (i.e. species names).</p>
<p>I’ll demonstrate this using the <code>Species</code> worksheet from our dataset.</p>
<p>First, let’s look at the raw data:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="tidy-data.html#cb77-1" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Species&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 419 × 12
##    Site   Point Photo Family Genus Species AddOn FieldName FullName WorkingName Alien FullID
##    &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;
##  1 invas… SE    NA    Aspar… Aspa… &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;      Asparag… Asparagus      NA     NA
##  2 invas… SE    NA    Poace… Cape… arundi… &lt;NA&gt;  &lt;NA&gt;      Capeoch… Capeochloa…    NA     NA
##  3 invas… SE    NA    Prote… Leuc… salign… &lt;NA&gt;  &lt;NA&gt;      Leucade… Leucadendr…    NA      1
##  4 invas… SE    NA    Poace… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;  Small gr… &lt;NA&gt;     Small grass    NA     NA
##  5 invas… SE    NA    Erica… Erica &lt;NA&gt;    smal… &lt;NA&gt;      Erica s… Erica smal…    NA     NA
##  6 invas… SE    NA    Rhamn… Phyl… ericoi… &lt;NA&gt;  &lt;NA&gt;      Phylica… Phylica er…    NA      1
##  7 invas… SE    NA    Fabac… Acac… saligna &lt;NA&gt;  &lt;NA&gt;      Acacia … Acacia sal…     1      1
##  8 invas… SE    NA    Cyper… Scho… &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;      Schoenus Schoenus       NA     NA
##  9 invas… SE    NA    Pinac… Pinus &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;      Pinus    Pinus           1     NA
## 10 invas… SE    NA    Fabac… Acac… pycnan… &lt;NA&gt;  &lt;NA&gt;      Acacia … Acacia pyc…     1      1
## # ℹ 409 more rows</code></pre>
<p>A bit messy, but in this case it is presence-only data and all we want are “Site”, “Point” and “WorkingName”, so if we just select those we’ll be close to having our long format data, like so:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="tidy-data.html#cb79-1" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Species&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb79-2"><a href="tidy-data.html#cb79-2" tabindex="-1"></a>  <span class="fu">select</span>(Site, Point, WorkingName)</span></code></pre></div>
<pre><code>## # A tibble: 419 × 3
##    Site     Point WorkingName           
##    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;                 
##  1 invasion SE    Asparagus             
##  2 invasion SE    Capeochloa arundinacea
##  3 invasion SE    Leucadendron salignum 
##  4 invasion SE    Small grass           
##  5 invasion SE    Erica small invasion  
##  6 invasion SE    Phylica ericoides     
##  7 invasion SE    Acacia saligna        
##  8 invasion SE    Schoenus              
##  9 invasion SE    Pinus                 
## 10 invasion SE    Acacia pycnantha      
## # ℹ 409 more rows</code></pre>
<p>And we can make it wider like so:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="tidy-data.html#cb81-1" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Species&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="tidy-data.html#cb81-2" tabindex="-1"></a>  <span class="fu">select</span>(Site, Point, WorkingName) <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="tidy-data.html#cb81-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Presence =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="co"># adds a column called &quot;Presence&quot; filled with &quot;1&quot;</span></span>
<span id="cb81-4"><a href="tidy-data.html#cb81-4" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> WorkingName, <span class="at">values_from =</span> Presence, <span class="at">values_fill =</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 24 × 186
##    Site         Point Asparagus Capeochloa arundinace…¹ Leucadendron salignu…² `Small grass`
##    &lt;chr&gt;        &lt;chr&gt;     &lt;dbl&gt;                   &lt;dbl&gt;                  &lt;dbl&gt;         &lt;dbl&gt;
##  1 invasion     SE            1                       1                      1             1
##  2 renosterveld SW            0                       0                      1             0
##  3 grass        NE            1                       0                      0             0
##  4 grass        NW            0                       0                      0             0
##  5 grass        SE            1                       0                      0             0
##  6 grass        SW            1                       0                      0             0
##  7 renosterveld NE            0                       0                      0             0
##  8 renosterveld NW            0                       0                      0             0
##  9 renosterveld SE            0                       0                      0             0
## 10 invasion     SW            0                       1                      0             0
## # ℹ 14 more rows
## # ℹ abbreviated names: ¹​`Capeochloa arundinacea`, ²​`Leucadendron salignum`
## # ℹ 180 more variables: `Erica small invasion` &lt;dbl&gt;, `Phylica ericoides` &lt;dbl&gt;,
## #   `Acacia saligna` &lt;dbl&gt;, Schoenus &lt;dbl&gt;, Pinus &lt;dbl&gt;, `Acacia pycnantha` &lt;dbl&gt;,
## #   `Acacia mearnsii` &lt;dbl&gt;, Platycaulos &lt;dbl&gt;, `Restio tetragonus` &lt;dbl&gt;,
## #   `Helichrysum crispa` &lt;dbl&gt;, `Cynodon dactylon` &lt;dbl&gt;, `Briza major` &lt;dbl&gt;,
## #   Metalasia &lt;dbl&gt;, Thesium &lt;dbl&gt;, `Helichrysum rosum` &lt;dbl&gt;, …</code></pre>
<blockquote>
<p>Note the use of <code>mutate</code> to add a column of ones. You could also use <code>add_column</code>.</p>
</blockquote>
<blockquote>
<p>WARNING! Note that if you have multiple identical rows in your data then <code>pivot_wider</code> won’t work without a little extra info. In this case, the data are presence only, so there should be no duplicates, but if it were catch data for example, you could have duplicates, because you may have the same species caught multiple times at one site. In this case you either need to <code>group_by</code> site and species and use <code>summarize</code> to take the <code>sum</code> before you <code>pivot_wider</code>, or you can add a function like <code>sum</code> to <code>pivot_wider</code> using the <code>values_fn =</code> argument. See <code>?pivot_wider</code> for details.</p>
</blockquote>
<p><br></p>
<p>Ok, looks good, but one thing we’re missing here is that our sites are currently identified by the combination of both the <code>Site</code> and <code>Point</code> columns, whereas community data matrices usually need to have a single unique name for each site. Fortunately, there are <em>tidyverse</em> functions for dealing with this.</p>
<p><br></p>
</div>
<div id="unite-and-separate" class="section level3 hasAnchor" number="4.7.3">
<h3><span class="header-section-number">4.7.3</span> <code>unite</code> and <code>separate</code><a href="tidy-data.html#unite-and-separate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here I use <code>unite</code> to combine the <code>Site</code> and <code>Point</code> columns into a new column called <code>SitePoint</code>. I’ve also changed the <code>select</code> line to only keep our new column, so that we output a community data matrix.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="tidy-data.html#cb83-1" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Species&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="tidy-data.html#cb83-2" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">&quot;SitePoint&quot;</span>, Site<span class="sc">:</span>Point, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb83-3"><a href="tidy-data.html#cb83-3" tabindex="-1"></a>  <span class="fu">select</span>(SitePoint, WorkingName) <span class="sc">%&gt;%</span></span>
<span id="cb83-4"><a href="tidy-data.html#cb83-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Presence =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="co"># adds a column called &quot;Presence&quot; filled with &quot;1&quot;</span></span>
<span id="cb83-5"><a href="tidy-data.html#cb83-5" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> WorkingName, <span class="at">values_from =</span> Presence, <span class="at">values_fill =</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 24 × 185
##    SitePoint       Asparagus `Capeochloa arundinacea` `Leucadendron salignum` `Small grass`
##    &lt;chr&gt;               &lt;dbl&gt;                    &lt;dbl&gt;                   &lt;dbl&gt;         &lt;dbl&gt;
##  1 invasion_SE             1                        1                       1             1
##  2 renosterveld_SW         0                        0                       1             0
##  3 grass_NE                1                        0                       0             0
##  4 grass_NW                0                        0                       0             0
##  5 grass_SE                1                        0                       0             0
##  6 grass_SW                1                        0                       0             0
##  7 renosterveld_NE         0                        0                       0             0
##  8 renosterveld_NW         0                        0                       0             0
##  9 renosterveld_SE         0                        0                       0             0
## 10 invasion_SW             0                        1                       0             0
## # ℹ 14 more rows
## # ℹ 180 more variables: `Erica small invasion` &lt;dbl&gt;, `Phylica ericoides` &lt;dbl&gt;,
## #   `Acacia saligna` &lt;dbl&gt;, Schoenus &lt;dbl&gt;, Pinus &lt;dbl&gt;, `Acacia pycnantha` &lt;dbl&gt;,
## #   `Acacia mearnsii` &lt;dbl&gt;, Platycaulos &lt;dbl&gt;, `Restio tetragonus` &lt;dbl&gt;,
## #   `Helichrysum crispa` &lt;dbl&gt;, `Cynodon dactylon` &lt;dbl&gt;, `Briza major` &lt;dbl&gt;,
## #   Metalasia &lt;dbl&gt;, Thesium &lt;dbl&gt;, `Helichrysum rosum` &lt;dbl&gt;,
## #   `Sporobolus africanus` &lt;dbl&gt;, Rhus &lt;dbl&gt;, Eragrostis &lt;dbl&gt;, Oedera &lt;dbl&gt;, …</code></pre>
<p>You can also split values using <code>separate</code>. For example, you may want to split the Latin names into genus and species.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="tidy-data.html#cb85-1" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Species&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="tidy-data.html#cb85-2" tabindex="-1"></a>  <span class="fu">separate</span>(WorkingName, <span class="fu">c</span>(<span class="st">&quot;Gen&quot;</span>, <span class="st">&quot;Sp&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="tidy-data.html#cb85-3" tabindex="-1"></a>  <span class="fu">select</span>(Gen, Sp)</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 5 rows [5, 29, 145, 223, 401].</code></pre>
<pre><code>## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 58 rows [1, 8, 9, 12, 17, 18, 21, 23,
## 24, 28, 30, 32, 34, 37, 38, 41, 45, 48, 49, 50, ...].</code></pre>
<pre><code>## # A tibble: 419 × 2
##    Gen          Sp         
##    &lt;chr&gt;        &lt;chr&gt;      
##  1 Asparagus    &lt;NA&gt;       
##  2 Capeochloa   arundinacea
##  3 Leucadendron salignum   
##  4 Small        grass      
##  5 Erica        small      
##  6 Phylica      ericoides  
##  7 Acacia       saligna    
##  8 Schoenus     &lt;NA&gt;       
##  9 Pinus        &lt;NA&gt;       
## 10 Acacia       pycnantha  
## # ℹ 409 more rows</code></pre>
<p>Note the warnings, because some plants were identified to genus only, or had makeshift names with more than 2 words like “Little yellow daisy”.</p>
<p><br></p>
</div>
</div>
<div id="getting-out-of-the-tidyverse" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Getting out of the <em>tidyverse</em><a href="tidy-data.html#getting-out-of-the-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>Pro Tip…</p>
</blockquote>
<p>Before I move on, there are times when you may need to get your data out of the <em>tidyverse</em> formats. Specifically, many R packages that analyze biological community data (e.g. <code>library(vegan)</code>) require community data matrices with column and row names. For some reason that I have yet to understand, the <em>tidyverse</em> tabular data class (<code>tibble</code>) doesn’t believe in row names, so to use your community data matrix with <code>vegan</code> etc, you have to break free of the <em>tidyverse</em>, which can be surprisingly difficult, but here’s how.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="tidy-data.html#cb89-1" tabindex="-1"></a><span class="co"># First rerun our tidyverse code to get as close to a community data matrix as possible</span></span>
<span id="cb89-2"><a href="tidy-data.html#cb89-2" tabindex="-1"></a>comm <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Species&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-3"><a href="tidy-data.html#cb89-3" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">&quot;SitePoint&quot;</span>, Site<span class="sc">:</span>Point, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-4"><a href="tidy-data.html#cb89-4" tabindex="-1"></a>  <span class="fu">select</span>(SitePoint, WorkingName) <span class="sc">%&gt;%</span></span>
<span id="cb89-5"><a href="tidy-data.html#cb89-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Presence =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="co"># adds a column called &quot;Presence&quot; filled with &quot;1&quot;</span></span>
<span id="cb89-6"><a href="tidy-data.html#cb89-6" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> WorkingName, <span class="at">values_from =</span> Presence, <span class="at">values_fill =</span> <span class="dv">0</span>)</span>
<span id="cb89-7"><a href="tidy-data.html#cb89-7" tabindex="-1"></a></span>
<span id="cb89-8"><a href="tidy-data.html#cb89-8" tabindex="-1"></a><span class="co"># Then some Untidyverse code to</span></span>
<span id="cb89-9"><a href="tidy-data.html#cb89-9" tabindex="-1"></a>comm <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">unclass</span>(comm)) <span class="co"># get out of the tibble format</span></span>
<span id="cb89-10"><a href="tidy-data.html#cb89-10" tabindex="-1"></a><span class="fu">rownames</span>(comm) <span class="ot">&lt;-</span> comm[,<span class="dv">1</span>] <span class="co"># add the first column &quot;SitePoint&quot; as rownames</span></span>
<span id="cb89-11"><a href="tidy-data.html#cb89-11" tabindex="-1"></a>comm <span class="ot">&lt;-</span> comm[,<span class="sc">-</span><span class="dv">1</span>] <span class="co"># remove the first column (i.e. &quot;SitePoint&quot;)</span></span>
<span id="cb89-12"><a href="tidy-data.html#cb89-12" tabindex="-1"></a></span>
<span id="cb89-13"><a href="tidy-data.html#cb89-13" tabindex="-1"></a>comm[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="co"># view the first 5 rows and 3 columns</span></span></code></pre></div>
<pre><code>##                 Asparagus Capeochloa.arundinacea Leucadendron.salignum
## invasion_SE             1                      1                     1
## renosterveld_SW         0                      0                     1
## grass_NE                1                      0                     0
## grass_NW                0                      0                     0
## grass_SE                1                      0                     0</code></pre>
<p>For more on analyzing community data, check out <a href="https://loving-goodall-ae19f9.netlify.app/docs/learningr/r-intro-2-biodiversity/#summarizing-community-data">this tutorial</a>.</p>
<p><br></p>
</div>
<div id="joining-dataframes" class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> Joining dataframes<a href="tidy-data.html#joining-dataframes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Often it’s easiest to work with multiple different data tables, like the <code>Species</code> and <code>Site</code> worksheets we’ve been playing with, but there are times that you’d like to compare a variable from one with a variable from another, and to do this you need to <code>join</code> them.</p>
<p>For example, let’s compare the count of species for each site with some of the environmental variables.</p>
<p>First, we calculate the number of species recorded in each site and save it as an object <code>sr</code>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="tidy-data.html#cb91-1" tabindex="-1"></a>sr <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Species&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-2"><a href="tidy-data.html#cb91-2" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">&quot;SitePoint&quot;</span>, Site<span class="sc">:</span>Point, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-3"><a href="tidy-data.html#cb91-3" tabindex="-1"></a>  <span class="fu">select</span>(SitePoint, WorkingName) <span class="sc">%&gt;%</span> </span>
<span id="cb91-4"><a href="tidy-data.html#cb91-4" tabindex="-1"></a>  <span class="fu">group_by</span>(SitePoint) <span class="sc">%&gt;%</span></span>
<span id="cb91-5"><a href="tidy-data.html#cb91-5" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="st">`</span><span class="at">Species Number</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">n</span>())</span>
<span id="cb91-6"><a href="tidy-data.html#cb91-6" tabindex="-1"></a></span>
<span id="cb91-7"><a href="tidy-data.html#cb91-7" tabindex="-1"></a>sr</span></code></pre></div>
<pre><code>## # A tibble: 24 × 2
##    SitePoint    `Species Number`
##    &lt;chr&gt;                   &lt;int&gt;
##  1 grass_NE                   17
##  2 grass_NW                   12
##  3 grass_SE                   13
##  4 grass_SW                   14
##  5 invasion_NE                15
##  6 invasion_NW                10
##  7 invasion_SE                13
##  8 invasion_SW                 8
##  9 limestone_NE               17
## 10 limestone_NW               23
## # ℹ 14 more rows</code></pre>
<p>Now let’s read in our site data, select the columns we want and join <code>sr</code> to it using <code>left_join</code>.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="tidy-data.html#cb93-1" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb93-2"><a href="tidy-data.html#cb93-2" tabindex="-1"></a>  <span class="fu">select</span>(SitePoint, PercentBareSoil, SoilPH) <span class="sc">%&gt;%</span></span>
<span id="cb93-3"><a href="tidy-data.html#cb93-3" tabindex="-1"></a>  <span class="fu">left_join</span>(sr, <span class="at">by =</span> <span class="st">&quot;SitePoint&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 24 × 4
##    SitePoint       PercentBareSoil SoilPH `Species Number`
##    &lt;chr&gt;                     &lt;dbl&gt;  &lt;dbl&gt;            &lt;int&gt;
##  1 grass_SE                      0   4.6                13
##  2 renosterveld_SE               5   5.4                18
##  3 invasion_SE                   0   3.79               13
##  4 sand_SE                      10   4.82               27
##  5 sandstone_SE                  5   4.91               23
##  6 limestone_SE                  0   6.48               26
##  7 grass_NE                      0   5.13               17
##  8 renosterveld_NE              30   5.7                17
##  9 invasion_NE                   5   3.7                15
## 10 sand_NE                       8   4.54               18
## # ℹ 14 more rows</code></pre>
<p>Hey presto!</p>
<p>But what was it we wanted to compare? Well why not be unscientific and just plot everything against everything else using a function from another library called <code>GGally</code>.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="tidy-data.html#cb95-1" tabindex="-1"></a><span class="fu">read_xlsx</span>(<span class="st">&quot;data/pracdatasheet.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Sites&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-2"><a href="tidy-data.html#cb95-2" tabindex="-1"></a>  <span class="fu">select</span>(SitePoint, PercentBareSoil, SoilPH) <span class="sc">%&gt;%</span></span>
<span id="cb95-3"><a href="tidy-data.html#cb95-3" tabindex="-1"></a>  <span class="fu">left_join</span>(sr, <span class="at">by =</span> <span class="st">&quot;SitePoint&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-4"><a href="tidy-data.html#cb95-4" tabindex="-1"></a>  GGally<span class="sc">::</span><span class="fu">ggpairs</span>(<span class="at">columns =</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(.))</span></code></pre></div>
<p><img src="data-management_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<p>A weak correlation between soil pH and % bare soil, and a near-significant (0.05 &lt; p &lt; 0.1) correlation between soil pH and species number.</p>
<blockquote>
<p>Note that if you only plan to use functions from a library a few times in your script it can be more efficient to call the function from the library once off using the syntax library::function (e.g. <code>GGally::ggpairs</code>) than to attach the whole library (i.e. calling <code>library(GGally)</code>) as it saves RAM.</p>
</blockquote>
<p><br></p>
<p>That’s it! Go forth and conquer!</p>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Wickham2014" class="csl-entry">
Wickham, Hadley. 2014. <span>“<span>Tidy Data</span>.”</span> <em>Journal of Statistical Software, Articles</em> 59 (10): 1–23. <a href="https://doi.org/10.18637/jss.v059.i10">https://doi.org/10.18637/jss.v059.i10</a>.
</div>
<div id="ref-Wickham2019" class="csl-entry">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>“<span class="nocase">Welcome to the tidyverse</span>.”</span> <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="further.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/05-tidydata.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/jslingsby/data-management/blob/master/05-tidydata.Rmd",
"text": null
},
"download": ["data-management.pdf", "data-management.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
